<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="Chandler Kwok"><meta name="copyright" content="Chandler Kwok"><title>ç†Ÿèƒ½ç”Ÿå·§ | éƒ­å¤§çã®Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="https://i.loli.net/2020/05/05/r8BpGnwzsW25QSN.jpg"></div><div class="author-info__name text-center">Chandler Kwok</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">52</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">52</span></a></div></div></div><nav id="nav" style="background-image: url(https://tva1.sinaimg.cn/large/007S8ZIlgy1get1mqmvxij31hc0u0q7i.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">éƒ­å¤§çã®Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">éƒ­å¤§çã®Blog</div><div id="site-sub-title">ç†Ÿèƒ½ç”Ÿå·§</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/31/K8S-Jenkins-CICD/">K8S &amp; Jenkins CICD</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-31</time><div class="content"><p>å…¬å¸å†…éƒ¨å„ä¸ªå¼€å‘å›¢é˜Ÿï¼Œä¸€ç›´æœ‰ç‹¬ç«‹è¿ä½œçš„ä¹ æƒ¯ï¼ŒæŒç»­é›†æˆåŸºæœ¬æ˜¯å„è‡ªçš„Jenkinsï¼Œåˆç”±äºåŠå…¬å†…ç½‘ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„ç¡¬ä»¶èµ„æºï¼Œæ­å»ºcephè¿™ç±»çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆæˆ‘ä¹Ÿå°è¯•ç”¨å‡ å°è™šæœºï¼Œæ­å»ºäº†cephï¼Œå¹¶æµ‹è¯•äº†å­˜å‚¨ioï¼Œæ€§èƒ½æ„Ÿäººçš„å·®ï¼Œç»è´¹ä¹Ÿä¸‹ä¸æ¥ï¼‰ï¼Œæ‰€ä»¥Jenkins ä¹Ÿä¸€ç›´æ”¾åœ¨K8Sé›†ç¾¤å¤–ã€‚æ¥ä¸‹é‡Œç®€å•è®°å½•ä¸€ä¸‹ç›®å‰çš„ä½¿ç”¨æ–¹å¼</p>
<ol>
<li><p>Jenkinsæ·»åŠ é›†ç¾¤ä¿¡æ¯ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gka14jnmdpj311t0u07jq.jpg" alt="image-20201101221351225"></p>
</li>
<li><p>æ·»åŠ ç”¨äºæ„å»ºé•œåƒçš„dockerä¸»æœºï¼Œå®é™…ä¸Šé•œåƒæ‰“åŒ…è¿˜å¯ä»¥é€šè¿‡mavençš„æ’ä»¶ï¼Œå¼€å‘åŒäº‹åœ¨æœ¬åœ°å¼€å‘æ„å»ºæ—¶ä¾¿æ˜¯é€šè¿‡mavençš„dockeræ’ä»¶ã€‚</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gka15f6yunj31s60nqte1.jpg" alt="image-20201101221444117"></p>
</li>
<li><p>ç¼–å†™Jenkinsçš„Dockerfileï¼ˆç•¥ï¼Œspringcloudå¾®æœåŠ¡çš„è¯ï¼Œå®˜æ–¹æœ‰ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ‹¿æ¥å¼€å§‹æ”¹æ”¹å°±å¯ä»¥ç”¨äº†ï¼‰</p>
</li>
<li><p>ä»“åº“é‡Œæ·»åŠ jenkinsfileï¼Œåœ¨æ­¤éœ€è¦è€ƒè™‘åˆ°å„ç§è¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹çš„åŒ…çš„ç¼“å­˜ï¼Œç”¨æ¥åŠ é€Ÿä¸‹ä¸€æ¬¡æ„å»ºç¼–è¯‘çš„é€Ÿåº¦ï¼Œä»¥ä¸‹ä¾¿æ˜¯å°†mavenæœ¬åœ°ä»“åº“çš„æœ¬åœ°è·¯å¾„ï¼ŒæŒ‚è½½åˆ°PVCä¸­ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  agent &#123;</span><br><span class="line">    kubernetes &#123;</span><br><span class="line">      cloud &#39;k8s-api-cs-software.sunvalley.com.cn&#39;</span><br><span class="line">      nodeSelector &#39;app&#x3D;jenkins&#39;</span><br><span class="line">      idleMinutes 5</span><br><span class="line">      yaml &quot;&quot;&quot;</span><br><span class="line">        apiVersion: v1</span><br><span class="line">        kind: Pod</span><br><span class="line">        metadata:</span><br><span class="line">          labels:</span><br><span class="line">            app: jenkins-jnlp</span><br><span class="line">        spec:</span><br><span class="line">          containers:</span><br><span class="line">          - name: jnlp</span><br><span class="line">            image: harbor.sunvalley.com.cn&#x2F;library&#x2F;jenkins-jnlp-slave:3.35-5</span><br><span class="line">          - name: maven</span><br><span class="line">            image: cs-harbor.sunvalley.com.cn&#x2F;library&#x2F;maven-base-image:3.0.5</span><br><span class="line">            command:</span><br><span class="line">            - cat</span><br><span class="line">            tty: true</span><br><span class="line">            volumeMounts:</span><br><span class="line">            - mountPath: &#x2F;data&#x2F;m2_dev&#x2F;</span><br><span class="line">              name: m2-dev</span><br><span class="line">          - name: docker-ci</span><br><span class="line">            image: harbor.sunvalley.com.cn&#x2F;library&#x2F;docker-ci:v19.03.5</span><br><span class="line">            command:</span><br><span class="line">            - cat</span><br><span class="line">            tty: true</span><br><span class="line">            volumeMounts:</span><br><span class="line">            - mountPath: &#x2F;var&#x2F;run&#x2F;docker.sock</span><br><span class="line">              name: docker-sock</span><br><span class="line">            - mountPath: &#x2F;data&#x2F;m2_dev&#x2F;</span><br><span class="line">              name: m2-dev</span><br><span class="line">          - name: kubectl-tools</span><br><span class="line">            image: harbor.sunvalley.com.cn&#x2F;library&#x2F;kubectl-tools:1.16.3</span><br><span class="line">            command:</span><br><span class="line">            - cat</span><br><span class="line">            tty: true</span><br><span class="line">          volumes:</span><br><span class="line">          - name: docker-sock</span><br><span class="line">            hostPath:</span><br><span class="line">              path: &#x2F;var&#x2F;run&#x2F;docker.sock</span><br><span class="line">          - name: m2-dev</span><br><span class="line">            hostPath:</span><br><span class="line">              path: &#x2F;data&#x2F;m2_dev&#x2F;</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        &#x2F;&#x2F;   serviceAccountName: admin-sample-user</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(&#39;Run maven&#39;) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        &#x2F;&#x2F; container(&#39;maven&#39;) &#123;</span><br><span class="line">        &#x2F;&#x2F;   sh &#39;mvn -B -f pom.xml -s &#x2F;data&#x2F;m2_dev&#x2F;settings.xml clean package -Dmaven.test.skip&#x3D;true -pl com.sunvalley:mwp-message-center -am -Pdev1 -e -U&#39;</span><br><span class="line">        &#x2F;&#x2F; &#125;</span><br><span class="line">        &#x2F;&#x2F; container(&#39;docker-ci&#39;) &#123;</span><br><span class="line">        &#x2F;&#x2F;   dir(path: &quot;mwp-message-center&quot;) &#123;</span><br><span class="line">        &#x2F;&#x2F;     script &#123;</span><br><span class="line">        &#x2F;&#x2F;       docker.withRegistry(&#39;https:&#x2F;&#x2F;cs-harbor.sunvalley.com.cn&#39;, &#39;harbor&#39; )&#123;</span><br><span class="line">        &#x2F;&#x2F;           def customImage &#x3D; docker.build(&quot;cs-harbor.sunvalley.com.cn&#x2F;internal&#x2F;$&#123;env.JOB_NAME&#125;:$&#123;env.GIT_COMMIT&#125;&quot;)</span><br><span class="line">        &#x2F;&#x2F;           customImage.push()</span><br><span class="line">        &#x2F;&#x2F;       &#125;</span><br><span class="line">        &#x2F;&#x2F;     &#125;</span><br><span class="line">        &#x2F;&#x2F;   &#125;</span><br><span class="line">        &#x2F;&#x2F; &#125;</span><br><span class="line">        container(&#39;kubectl-tools&#39;) &#123;</span><br><span class="line">        &#x2F;&#x2F;   sh &quot;sed -i &#39;s&#x2F;&lt;PROJECT_NAME&gt;&#x2F;$&#123;env.JOB_NAME&#125;&#x2F;&#39; deployment.yaml&quot;</span><br><span class="line">        &#x2F;&#x2F;   sh &quot;sed -i &#39;s&#x2F;&lt;BUILD_TAG&gt;&#x2F;$&#123;env.GIT_COMMIT&#125;&#x2F;&#39; deployment.yaml&quot;</span><br><span class="line">        &#x2F;&#x2F;   sh &#39;kubectl apply -f deployment.yaml&#39;</span><br><span class="line">             sh &quot;kubectl get pods&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="5">
<li><p>Jenkinsfile æ— è®ºæ—¶å£°æ˜å¼è¿˜æ˜¯è„šæœ¬å¼ã€‚éƒ½ä¸æ˜¯yamlè¯­æ³•ï¼ŒJenkinsè‡ªèº«æä¾›äº†ä¸€ä¸ªLinterï¼Œä¸è¿‡å‘€ã€‚æ€»æ˜¯åœ¨ç•Œé¢ä¸Šåˆ‡æ¥åˆ‡å»ã€‚æœ‰ç‚¹éº»çƒ¦ã€‚å¦‚æœæ˜¯vscodeç”¨æˆ·å¯ä»¥ç”¨ä¸‹é¢çš„æ’ä»¶ï¼Œæ¯•ç«Ÿé¡¹ç›®å¤šäº†ï¼Œjenkinsfile ç†Ÿæ‚‰äº†ï¼Œè¿™ä¸ªå·¥ä½œä¼šå¸®ä¸Šå¿™ã€‚</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gk88oxttjwj31la0cqk13.jpg" alt="image-20201031090430764"> </p>
</li>
</ol>
<p>ç„¶è€Œï¼Œä¹Ÿæœ‰éœ€è¦åç³Ÿçš„åœ°æ–¹ï¼ŒJenkinsçš„æ’ä»¶ç®¡ç†ï¼Œç®¡ç†èµ·æ¥å¥½å´©æºƒã€‚æœ‰äº›æ’ä»¶ä¼šä¾èµ–å¦ä¸€ä¸ªæ’ä»¶çš„é«˜ç‰ˆæœ¬ã€‚æ‰€ä»¥å‡çº§æ’ä»¶çš„æ—¶å€™ï¼Œä¸€å¹¶æŠŠä¾èµ–æ’ä»¶ä¸€èµ·å‡çº§äº†ã€‚ä¸¾ä¾‹å°±æ˜¯pipelineçš„å‡çº§ï¼ŒæŠŠJenkins mavenæ’ä»¶ä¸€å¹¶å‡çº§äº†ã€‚ç»“æœæ–°çš„Jenkins mavençš„ç‰ˆæœ¬ä¸æ”¯æŒjdk1.6ã€‚ è€æ—§çš„javaé¡¹ç›®æ„å»ºæ—¶æŠ¥é”™ã€‚åˆæ¯”å¦‚jenkins k8s cloud çš„æ’ä»¶çš„éƒ¨åˆ†åŠŸèƒ½ï¼Œåœ¨è¾ƒæ–°çš„Jenkinsä¸Šæ‰èƒ½è¿è¡Œï¼ˆä¹Ÿæ˜¯æµ‹è¯•äº†å¥½ä¹…æ‰å‘ç°ï¼‰ï¼Œæ–‡æ¡£åŠç‚¹æ²¡æã€‚ç”šè‡³è¯•è¿‡åœ¨å‡çº§jenkinsæ’ä»¶çš„æ˜¯ï¼Œå®˜æ–¹ä¸‹è½½ä¸­å¿ƒå®æ‰äº†ã€‚ç¬¬äºŒå¤©æ‰æ¢å¤ã€‚</p>
<p>å†åç³Ÿä¸€ç‚¹ï¼ŒJenkinsçš„agentï¼Œéœ€è¦å›è°ƒmasterçš„ç«¯å£æ¥é€šè®¯ï¼Œæˆ‘ä»¬ç›®å‰æ˜¯å›ºå®šäº†50000ç«¯å£ã€‚åœ¨è·¨å…¬ç½‘çš„åœºæ™¯ä¸‹ï¼Œå°±æœ‰ç‚¹ä¸ºéš¾äº†ï¼Œæˆ‘ä¸æƒ³æš´éœ²50000ç«¯å£åˆ°å…¬ç½‘å•Šã€‚</p>
<p>è¿˜æœ‰å‘€ï¼ŒJenkins çš„K8S æ’ä»¶ï¼Œç›®å‰ä¸æ”¯æŒåœ¨æ„å»ºç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œ è°ƒç”¨ä¸¤ä¸ªK8Sé›†ç¾¤ã€‚æè¿°ä¸ªæ¡ˆä¾‹ï¼šæˆ‘åœ¨å†…ç½‘è‡ªå»ºçš„K8Sæ„å»ºåï¼Œæœ€åä¸€æ­¥å†applyåˆ°AWSçš„EKSã€‚ï¼ˆè¿˜è¦èŠ±ç‚¹æ—¶é—´ï¼Œå¯»æ‰¾åˆ°ä¼˜é›…çš„è§£å†³æ–¹å¼ï¼‰</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/10/26/AWS-S3-Performance/">AWS S3 Performance</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-10-26</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/S3-performance/">S3 performance</a></span><div class="content"><p>S3 æ˜¯AWSçš„æœ€å¸¸ç”¨çš„æœåŠ¡ä¹‹ä¸€ï¼Œä½†æ˜¯å¯¹äºS3çš„å¹¶å‘è¿æ¥æ•°ï¼Œä¸€ç›´æœ‰ä¸€ä¸ªç–™ç˜©ã€‚2018å¹´å‰ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªfilecenterçš„å¾®æœåŠ¡ï¼Œä½œä¸ºæ–‡ä»¶å­˜å‚¨çš„å…¥å£ï¼ŒäºŒæ¬¡å°è£…åï¼Œä½œä¸ºé›†å›¢å†…éƒ¨æ€»çš„æ–‡ä»¶å­˜å‚¨æœåŠ¡ï¼Œéšå³è€Œæ¥çš„é—®é¢˜ï¼Œä¼šé‡åˆ°å¹¶å‘è¿æ¥é”™è¯¯ï¼Œåæ¥æˆ‘ä»¬ä¸‹è°ƒäº†è°ƒç”¨é¢‘æ¬¡ï¼Œé—®é¢˜æœ‰æ‰€è§£å†³ã€‚ä½†æœ€è¿‘çˆ¬è™«ä¸šåŠ¡çš„ä¸Šçº¿ï¼Œåˆå†æƒ³èµ·è¿™ä¸ªå°å‘ï¼Œå¹¶æŸ¥é˜…æ–‡æ¡£åï¼Œå‘ç°2018å¹´ AWSè¿›ä¸€æ­¥ä¸Šè°ƒäº†S3 Bucketçš„å¹¶å‘æ•°ã€‚<a href="https://aws.amazon.com/cn/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/" target="_blank" rel="noopener">Amazon S3 å®£å¸ƒæé«˜è¯·æ±‚é€Ÿç‡æ€§èƒ½</a></p>
<p>é‚£åœ¨å¤§å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œå¦‚ä½•ç›‘æ§S3çš„æ€§èƒ½å‘¢ï¼Ÿä¸‹é¢çš„æ–‡ç« ç»™å‡ºäº†è§£ç­”ã€‚</p>
<p><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/optimizing-performance.html" target="_blank" rel="noopener">S3 Best Performance</a></p>
<blockquote>
<p>Your applications can easily achieve thousands of transactions per second in request performance when uploading and retrieving storage from Amazon S3. Amazon S3 automatically scales to high request rates. For example, your application can achieve at least 3,500 PUT/COPY/POST/DELETE or 5,500 GET/HEAD requests per second per <a href="https://docs.aws.amazon.com/general/latest/gr/glos-chap.html#keyprefix" target="_blank" rel="noopener">prefix</a> in a bucket. There are no limits to the number of prefixes in a bucket. You can increase your read or write performance by parallelizing reads. For example, if you create 10 prefixes in an Amazon S3 bucket to parallelize reads, you could scale your read performance to 55,000 read requests per second.</p>
</blockquote>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1gk5g8e0gl1j31md0u04en.jpg" alt="image-20201028230839926"></p>
<p>S3 æ§åˆ¶å°å’Œcloudwatchéƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„ç›‘æ§æŒ‡æ ‡ã€‚Awesomeï¼</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/09/05/%E6%B5%AE%E7%82%B9%E5%9E%8B/">æµ®ç‚¹å‹</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-09-05</time><div class="content"></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/17/vscode-pytest/">vscode pytest</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-17</time><div class="content"><p>æœ‰é¬¼ï¼ï¼ï¼</p>
<p>åœ¨vscodeï¼Œå†™ä¸€ä¸ªpythonè„šæœ¬çš„æ—¶å€™ï¼ŒåŸæœ¬åº”è¯¥åªå¾€æ•°æ®åº“é‡Œï¼Œæ’å…¥ä¸€æ¡æ•°æ®ã€‚å¯æ˜¯æœ‰æ—¶å€™æ‰§è¡Œåï¼Œå´å‘ç°æ’å…¥äº†å¤šå°æ•°æ®ï¼Œå¹¶ä¸”æœ‰æ—¶å€™2æ¡ï¼Œæœ‰æ—¶å€™3æ¡ã€‚ç”±äºè„šæœ¬çš„é€»è¾‘ä¸ç®—å¤æ‚ï¼Œäºæ˜¯è®¤ä¸ºæ˜¯vscodeåœ¨æé¬¼ã€‚åå¤vscodeçš„setting.jsonæ–‡ä»¶åï¼Œæ³¨é‡Šéƒ¨åˆ†é…ç½®ï¼Œä¹‹åæ‰¾åˆ°äº†ç¥¸æ ¹ï¼šæ–‡ä»¶åä»¥testå¼€å§‹ï¼Œæ¯æ¬¡ä¿å­˜çš„æ—¶å€™ï¼Œè§¦å‘äº†pytestè‡ªåŠ¨æ‰§è¡Œäº†ä¸€æ¬¡æµ‹è¯•ã€‚æˆ‘åˆä¹ æƒ¯å¤šæ¬¡ctrl + sï¼Œæ‰€ä»¥å°±è«åå…¶å¦™çš„å¤šäº†ä¸å°‘æ•°æ®ã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/07/10/EKS-%E6%9C%AD%E8%AE%B0/">EKS æœ­è®°</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-10</time><div class="content"><p>æœ€è¿‘è¢«æ–°è§„åˆ’çš„ä¸­å°ï¼Œå¿™åˆ°ç„¦å¤´çƒ‚é¢ã€‚å›åˆ°EKSè¯é¢˜å§ã€‚</p>
<ol>
<li><p>æ¶æ„å’Œç½‘ç»œçš„è§„åˆ’ã€‚EKS or self-manager K8Sï¼Œæœ€ç»ˆæŠ•ç»™äº†EKSï¼Œæ¯•ç«Ÿåœ¨æˆ‘ä¹Ÿå°è¿‡åœ¨AWS å¤šç§éƒ¨ç½²K8Sçš„æ–¹æ¡ˆã€‚</p>
<p>é€‰æ‹©EKSæœ€å…³é”®çš„åŸå› æ˜¯ï¼šEKS çš„è‡ªå¸¦CNIï¼Œæ‰€æœ‰çš„podséƒ½å¯ä»¥æ— ç¼å’Œvpcçš„EC2ï¼Œæ— ç¼è°ƒç”¨ã€‚</p>
</li>
<li><p>åœ¨æ„å»ºEKSçš„ VPCï¼Œæˆ‘ä»¬é‡‡ç”¨å…¨publicå­ç½‘çš„æ¨¡å¼ï¼Œæ”¾å¼ƒäº†ä¼ ç»Ÿç§æœ‰å­ç½‘ã€‚åŸå› æ˜¯è¿™ä¸ªvpcï¼Œ</p>
</li>
<li><p>EKSçš„nodeè™½æœ‰å…¬ç½‘IPï¼Œå¹¶æ²¡æœ‰é™„åŠ å¼¹æ€§ç½‘å¡ï¼Œæ„å‘³ç€ASGåœ¨ä¼¸ç¼©åï¼Œnodeå¯èƒ½è¢«é‡å»ºäº†ã€‚é‚£ä¹ˆåœ¨k8s å®šä¹‰ serviceèµ„æºæ—¶ï¼Œtypeé€‰æ‹©ä¸ºnode typeï¼Œå¹¶ä¸å¯é ï¼Œæ¯•ç«Ÿnodeçš„IPæœ¬èº«å°±å¯èƒ½åœ¨é‡å¯åï¼Œå˜æ›´æ‰ã€‚</p>
</li>
<li><p>å…¶ä¸­ä¹Ÿæœ‰ä¸€ä¸ªå°æ’æ›²ï¼ŒåŒäº‹æå‡ºæ¥ç”¨EKSé›†ç¾¤æ–¹æ¡ˆï¼Œå®ç°ç½‘ç»œä»£ç†æœåŠ¡åº”ç”¨é›†ç¾¤ï¼Œæä¾›ä»£ç†IPç»™çˆ¬è™«æœåŠ¡ã€‚å¼€ä¼šä¸­æˆ‘ä¹Ÿè„‘å­çƒ­ï¼Œå±…ç„¶è®¤å¯äº†ã€‚å†·é™åï¼Œæ‰å‘ç°ä¸å¯¹åŠ²å•Šã€‚EKS çš„CNI è®©æ¯ä¸€ä¸ªpodséƒ½èƒ½åˆ†é…åˆ°vpcçš„ä¸€ä¸ªipåœ°å€ï¼Œä½†æ˜¯podsçš„äº’è”ç½‘è®¿é—®ï¼Œè¿˜æ˜¯è¦é€šè¿‡é™„åŠ åœ¨ä¸»æœºçš„network interfaceä¸Šäº’è”ç½‘ç½‘å…³ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡è¿™ä¸ªnetwork interfaceçš„ipå‡ºå»å‘€ã€‚ç®€å•è®²ï¼Œå°±æ˜¯pods å®é™…è¿˜æ˜¯é€šè¿‡æ‰€åœ¨ec2çš„å…¬ç½‘IPå‡ºå»ã€‚å®Œå…¨å°±ä¸æ˜¯ä»–è¯´çš„ï¼Œæ¯ä¸ªpods éƒ½èƒ½æåˆ°ä¸€ä¸ªå…¬ç½‘IPï¼Œå¤§è¯¯å•Šï¼</p>
<p> <img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gglimx1tkaj31st0u0e0v.jpg" alt="image-20200710071931788"></p>
</li>
</ol>
<p>â€‹    5. EKSæ–‡æ¡£ä¸­ï¼Œè‡ªå¸¦storageclassçš„ä¾‹å­ï¼Œé€šè¿‡scç”Ÿäº§</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/19/SCRUM/">Scrum æ•æ·å¼€å‘</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-19</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E6%95%8F%E6%8D%B7%E5%BC%80%E5%8F%91/">æ•æ·å¼€å‘</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Scrum/">Scrum</a><span class="article-meta__link">-</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/%E7%90%86%E8%AE%BA%E4%B8%8E%E5%AE%9E%E8%B7%B5/">ç†è®ºä¸å®è·µ</a></span><div class="content"></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/19/multi-EKS-in-VPC/">multi EKS in VPC</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-19</time><div class="content"><blockquote>
<p>Hello Chandler, </p>
<p>Thank you for contacting AWS support. My name is Sypher and I will be helping you and your case today. According to your description, I understand you want to ask that is there have any flaws of creating two EKS cluster in one VPC. If I misunderstand your question, please feel free to correct me. Generally speak, there wonâ€™t have any flaws if you deploy two EKS clusters in one VPC. The only thing currently it might need to be noticed is the IP address allocate problem. As you might know, Amazon EKS supports native VPC networking via the Amazon VPC Container Network Interface (CNI) plugin for Kubernetes [1]. Using this CNI plugin allows Kubernetes pods to have the same IP address inside the pod as they do on the VPC network. Thus, it means that each pod will allocate one private IP from your VPC. If each EKS cluster might deploy lots of pods in the future, you might need to consider the IP insufficient problem. After I reviewed your EKS Clustersâ€™ VPC, each subnet still have more that 8000 IPs can use. Hence, I think currently there have no issue you need to worry. However, if you have some questions or encountered the issue in the future, please do not hesitate to reach out us again. We are willing to help you solve the problem.</p>
</blockquote>
<p>ç»¼ä¸Šï¼Œä¸ºéªŒè¯æˆ‘çš„ç–‘é—®ï¼šä¸€ä¸ªVPCï¼Œå¤šä¸ªEKSé›†ç¾¤ï¼Œå¹¶shareæ‰€æœ‰çš„ç½‘ç»œã€‚å› æ­¤æˆ‘åŠ¨æ‰‹è¯•äº†ä¸€å‘ã€‚å¦‚æˆ‘æ¨æµ‹ï¼ŒAWSçš„EKS ç®€ç›´æ£’å‘†äº†ï¼ç”±äºEKSçš„CNIæ’ä»¶ï¼Œä½¿å¾—PODSçš„ç½‘ç»œæ¥å£ï¼Œå¯¹åº”ä¸€ä¸ªVPCä¸­çš„ä¸€ä¸ªç§æœ‰ipï¼ˆnetwork interfaceï¼‰ã€‚è¿™ä¸ªnetwork interfaceä¸Šçš„å®‰å…¨ç»„è§„åˆ™ï¼Œå®ç°äº†ç½‘ç»œçš„äº’é€šã€‚</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/19/one-cluster-or-many/">one cluster or many</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-19</time><div class="content"><p>åœ¨EKSä¸­ï¼Œ ä¸€ä¸ªé›†ç¾¤ OR å¤šä¸ªé›†ç¾¤ï¼Œæ˜¯ä¸€ä¸ªè§„åˆ’è€…ç»•ä¸å¼€çš„ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘åœ¨è§„åˆ’çš„åˆæœŸï¼Œä¸ºæ¯ä¸ªå¼€å‘éƒ¨é—¨ï¼ˆä¸šåŠ¡ç‹¬ç«‹ï¼‰ï¼Œåˆ›å»ºä¸åŒçš„é›†ç¾¤ã€‚è€ƒè™‘åˆ°é›†ç¾¤å¯èƒ½ä¼šå‡çº§ï¼Œå…¶ä¸­çš„</p>
<p>å°¤å…¶æˆ‘ä»¬é¢å¤–ï¼Œå¸®ä»–ä»¬æ‰“é€šäº†pods cidrä¸å¼€å‘åŠå…¬ç½‘æ®µçš„ç½‘ç»œã€‚</p>
<p>å•ä¸€é›†ç¾¤ï¼Œå¤šç§Ÿæˆ·çš„æ–¹å¼å­˜åœ¨å¤šä¸ªç¼ºé™·ï¼š</p>
<ul>
<li>soft multi-tenancy</li>
<li>ops affects all tenants </li>
<li>same K8S Version</li>
</ul>
<p>å¤šé›†ç¾¤ï¼Œå¤šç§Ÿæˆ·çš„æ–¹å¼ï¼š</p>
<ul>
<li>Hypervisor for hard multi-tenancy</li>
<li>blast Radilis limits</li>
<li>diff configs &amp; diff k8s version</li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/19/es6/">es6</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-19</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/ES6-%E5%B7%A9%E5%9B%BA/">ES6 å·©å›º</a></span><div class="content"><p>èœé¸Ÿå­¦ES6</p>
<ol>
<li>ES6 ä¹‹æ¨¡ç‰ˆ</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">âœ cat aaaa.js   </span><br><span class="line">let name = "koma"</span><br><span class="line"></span><br><span class="line">function dd(format)&#123;</span><br><span class="line">    console.log(format)</span><br><span class="line">&#125;</span><br><span class="line">// dd`4344`</span><br><span class="line">dd(4344)                 </span><br><span class="line"></span><br><span class="line">~/code/algorithm via â¬¢ v10.16.0 via algorithm </span><br><span class="line">âœ node aaaa.js </span><br><span class="line">4344</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è¿™ä¸ªå°±æ˜¯æ™®é€šçš„jsæ–¹æ³•è°ƒç”¨</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">âœ cat aaaa.js </span><br><span class="line">let name = <span class="string">"koma"</span></span><br><span class="line"></span><br><span class="line">function dd(format,...args)&#123;</span><br><span class="line">    console.log(format)</span><br><span class="line">    console.log(args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dd`ä½ å¥½å–ï¼Œ$&#123;name&#125;`%                                                                                      </span><br><span class="line"></span><br><span class="line">~/code/algorithm via â¬¢ v10<span class="number">.16</span><span class="number">.0</span> via algorithm </span><br><span class="line">âœ node aaaa.js </span><br><span class="line">[ <span class="string">'ä½ å¥½å–ï¼Œ'</span>, <span class="string">''</span> ]</span><br><span class="line">[ <span class="string">'koma'</span> ]</span><br><span class="line"><span class="comment"># è¿™ä¸ªå°±æ˜¯æ¨¡ç‰ˆè°ƒç”¨</span></span><br><span class="line"><span class="comment"># å¥½ç¬‘çš„æ˜¯ï¼Œæˆ‘åœ¨æ‰‹æœºå±å¹•ä¸Šï¼Œçœ‹ä»£ç æ—¶ï¼Œä¸€åº¦ä»¥ä¸ºjså¯ä»¥ä¸ç”¨å¸¦æ‹¬å·ï¼Œå°±å¯ä»¥è°ƒç”¨æ–¹æ³•ã€‚ğŸ˜“</span></span><br></pre></td></tr></table></figure>



<ol start="2">
<li>ES6 ä¹‹Symbol</li>
</ol>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2020/06/09/EKS-Unauthorized/">EKS Unauthorized</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-06-09</time><div class="content"></div><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://tva1.sinaimg.cn/large/007S8ZIlgy1get1mqmvxij31hc0u0q7i.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2020 By Chandler Kwok</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>